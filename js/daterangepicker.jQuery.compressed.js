!function(e){e.fn.daterangepicker=function(t){function a(t){if(!t.getDate())return"";{var a=(t.getDate(),t.getMonth());t.getFullYear()}a++;var i=o.dateFormat;return e.datepicker.formatDate(i,t)}function i(){"closed"==D.data("state")&&(s(),D.fadeIn(300).data("state","open"),o.onOpen())}function n(){"open"==D.data("state")&&(D.fadeOut(300).data("state","closed"),o.onClose())}function r(){"open"==D.data("state")?n():i()}function s(){var t=T||c,a=t.offset(),i="left",n=a.left,r=e(window).width()-n-t.outerWidth();n>r&&(i="right",n=r),D.parent().css(i,n).css("top",a.top+t.outerHeight())}function d(e,t,a,i){if(e.is(".ui-daterangepicker-specificDate"))i.hide(),a.show(),t.find(".title-start").text(o.presets.specificDate),t.find(".range-start").restoreDateFromData().css("opacity",1).show(400),t.find(".range-end").restoreDateFromData().css("opacity",0).hide(400),setTimeout(function(){i.fadeIn()},400);else if(e.is(".ui-daterangepicker-allDatesBefore"))i.hide(),a.show(),t.find(".title-end").text(o.presets.allDatesBefore),t.find(".range-start").saveDateToData().datepicker("setDate",o.earliestDate).css("opacity",0).hide(400),t.find(".range-end").restoreDateFromData().css("opacity",1).show(400),setTimeout(function(){i.fadeIn()},400);else if(e.is(".ui-daterangepicker-allDatesAfter"))i.hide(),a.show(),t.find(".title-start").text(o.presets.allDatesAfter),t.find(".range-start").restoreDateFromData().css("opacity",1).show(400),t.find(".range-end").saveDateToData().datepicker("setDate",o.latestDate).css("opacity",0).hide(400),setTimeout(function(){i.fadeIn()},400);else if(e.is(".ui-daterangepicker-dateRange"))i.hide(),a.show(),t.find(".title-start").text(o.rangeStartTitle),t.find(".title-end").text(o.rangeEndTitle),t.find(".range-start").restoreDateFromData().css("opacity",1).show(400),t.find(".range-end").restoreDateFromData().css("opacity",1).show(400),setTimeout(function(){i.fadeIn()},400);else{i.hide(),t.find(".range-start, .range-end").css("opacity",0).hide(400,function(){a.hide()});var n="string"==typeof e.data("dateStart")?Date.parse(e.data("dateStart")):e.data("dateStart")(),r="string"==typeof e.data("dateEnd")?Date.parse(e.data("dateEnd")):e.data("dateEnd")();t.find(".range-start").datepicker("setDate",n).find(".ui-datepicker-current-day").trigger("click"),t.find(".range-end").datepicker("setDate",r).find(".ui-datepicker-current-day").trigger("click")}return!1}var c=e(this),o=e.extend({presetRanges:[{text:"Today",dateStart:"today",dateEnd:"today"},{text:"Last 7 days",dateStart:"today-7days",dateEnd:"today"},{text:"Month to date",dateStart:function(){return Date.parse("today").moveToFirstDayOfMonth()},dateEnd:"today"},{text:"Year to date",dateStart:function(){var e=Date.parse("today");return e.setMonth(0),e.setDate(1),e},dateEnd:"today"},{text:"The previous Month",dateStart:function(){return Date.parse("1 month ago").moveToFirstDayOfMonth()},dateEnd:function(){return Date.parse("1 month ago").moveToLastDayOfMonth()}}],presets:{specificDate:"Specific Date",allDatesBefore:"All Dates Before",allDatesAfter:"All Dates After",dateRange:"Date Range"},rangeStartTitle:"Start date",rangeEndTitle:"End date",nextLinkText:"Next",prevLinkText:"Prev",target:c,doneButtonText:"Done",earliestDate:Date.parse("-15years"),latestDate:Date.parse("+15years"),constrainDates:!1,rangeSplitter:"-",dateFormat:"m/d/yy",closeOnSelect:!0,arrows:!1,appendTo:"body",className:null,onClose:function(){},onOpen:function(){},onChange:function(){},targetFormElement:null,datepickerOptions:null},t),l=e(o.targetFormElement),p={onSelect:function(){var t=D.find(".range-start"),i=D.find(".range-end");D.find(".ui-daterangepicker-specificDate").is(".ui-state-active")&&i.datepicker("setDate",t.datepicker("getDate")),e(this).trigger("constrainOtherPicker");var r=a(t.datepicker("getDate")),s=a(i.datepicker("getDate"));if(2==c.length)c.eq(0).val(r),c.eq(1).val(s);else{var d=r!=s?r+" "+o.rangeSplitter+" "+s:r;c.val(d),l.length&&l.val(d)}o.closeOnSelect&&(D.find("li.ui-state-active").is(".ui-daterangepicker-dateRange")||D.is(":animated")||n(),e(this).trigger("constrainOtherPicker"),o.onChange(r!=s?[r,s]:[r]))},defaultDate:0};c.bind("change",o.onChange),o.datepickerOptions=t?e.extend(p,t.datepickerOptions):p;var u,f,g,h=Date.parse("today");2==c.size()?(f=Date.parse(c.eq(0).val()),g=Date.parse(c.eq(1).val()),null==f&&(f=g),null==g&&(g=f)):(f=Date.parse(c.val().split(o.rangeSplitter)[0]),g=Date.parse(c.val().split(o.rangeSplitter)[1]),l.length&&(f=Date.parse(l.val().split(o.rangeSplitter)[0]),g=Date.parse(l.val().split(o.rangeSplitter)[1])),null==g&&(g=f)),null!=f&&(u=f),null!=g&&(h=g);var D=e('<div class="ui-daterangepicker ui-widget ui-helper-clearfix ui-widget-content ui-corner-all"></div>');o.className&&o.className.length&&D.addClass(o.className);!function(){var t=e('<ul class="ui-widget-content"></ul>').appendTo(D);e.each(o.presetRanges,function(){e('<li class="ui-daterangepicker-'+this.text.replace(/ /g,"")+' ui-corner-all"><a href="#">'+this.text+"</a></li>").data("dateStart",this.dateStart).data("dateEnd",this.dateEnd).appendTo(t)});var a=0;return e.each(o.presets,function(i,n){e('<li class="ui-daterangepicker-'+i+" preset_"+a+' ui-helper-clearfix ui-corner-all"><span class="ui-icon ui-icon-triangle-1-e"></span><a href="#">'+n+"</a></li>").appendTo(t),a++}),t.find("li").hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).click(function(){return D.find(".ui-state-active").removeClass("ui-state-active"),e(this).addClass("ui-state-active"),d(e(this),D,v,k),!1}),t}();e.fn.restoreDateFromData=function(){return e(this).data("saveDate")&&e(this).datepicker("setDate",e(this).data("saveDate")).removeData("saveDate"),this},e.fn.saveDateToData=function(){return e(this).data("saveDate")||e(this).data("saveDate",e(this).datepicker("getDate")),this};var v=e('<div class="ranges ui-widget-header ui-corner-all ui-helper-clearfix"><div class="range-start"><span class="title-start">Start Date</span></div><div class="range-end"><span class="title-end">End Date</span></div></div>').appendTo(D);v.find(".range-start, .range-end").datepicker(o.datepickerOptions),v.find(".range-start").datepicker("setDate",u),v.find(".range-end").datepicker("setDate",h),v.find(".range-start, .range-end").bind("constrainOtherPicker",function(){o.constrainDates&&(e(this).is(".range-start")?D.find(".range-end").datepicker("option","minDate",e(this).datepicker("getDate")):D.find(".range-start").datepicker("option","maxDate",e(this).datepicker("getDate")))}).trigger("constrainOtherPicker");var k=e('<button class="btnDone ui-state-default ui-corner-all">'+o.doneButtonText+"</button>").click(function(){D.find(".ui-datepicker-current-day").trigger("click"),n()}).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).appendTo(v);if(e(this).click(function(){return r(),!1}),v.hide().find(".range-start, .range-end, .btnDone").hide(),D.data("state","closed"),v.find(".ui-datepicker").css("display","block"),e(o.appendTo).append(D),D.wrap('<div class="ui-daterangepickercontain"></div>'),o.arrows&&1==c.size()){var m=e('<a href="#" class="ui-daterangepicker-prev ui-corner-all" title="'+o.prevLinkText+'"><span class="ui-icon ui-icon-circle-triangle-w">'+o.prevLinkText+"</span></a>"),y=e('<a href="#" class="ui-daterangepicker-next ui-corner-all" title="'+o.nextLinkText+'"><span class="ui-icon ui-icon-circle-triangle-e">'+o.nextLinkText+"</span></a>");e(this).addClass("ui-rangepicker-input ui-widget-content").wrap('<div class="ui-daterangepicker-arrows ui-widget ui-widget-header ui-helper-clearfix ui-corner-all"></div>').before(m).before(y).parent().find("a").click(function(){var t=v.find(".range-start").datepicker("getDate"),a=v.find(".range-end").datepicker("getDate"),i=Math.abs(new TimeSpan(t-a).getTotalMilliseconds())+864e5;return e(this).is(".ui-daterangepicker-prev")&&(i=-i),v.find(".range-start, .range-end ").each(function(){var t=e(this).datepicker("getDate");return null==t?!1:void e(this).datepicker("setDate",t.add({milliseconds:i})).find(".ui-datepicker-current-day").trigger("click")}),!1}).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});var T=c.parent()}return e(document).click(function(){D.is(":visible")&&n()}),D.click(function(){return!1}).hide(),this}}(jQuery);